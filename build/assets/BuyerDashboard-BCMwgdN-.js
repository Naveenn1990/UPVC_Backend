import{r as o,u as v,b as y,c as m,j as e,d as n,a as S}from"./index-BvbRJS_t.js";import{M as w}from"./index-DWuUjxJc.js";import{B as k}from"./BuyerBottomNav-Bxt6vIKH.js";import{T as L}from"./TopTabBar-BreSykwf.js";import{R as E}from"./index-DEuL2NM2.js";/* empty css                       */const M=()=>{const[r,b]=o.useState(!0),[s,u]=o.useState(null),[i,h]=o.useState(null),[l,d]=o.useState(!1),c=o.useRef(null),p=v();o.useEffect(()=>{x()},[]);const x=async()=>{try{const a=await y.get(m("api/homepage"));u(a.data.data)}catch(a){console.error("Error fetching homepage data:",a),d(!0)}finally{b(!1)}},t=a=>{if(c.current){const[g,j]=a.split(".").map(Number),f=g*60+j;c.current.seekTo(f),h(a)}},N=a=>{const[g,j]=a.split(".");return`${g.padStart(2,"0")}:${j.padStart(2,"0")}`};return r?e.jsx("div",{className:"homepage-loading",children:e.jsx("div",{className:"spinner"})}):s?e.jsxs("div",{className:"homepage-container",children:[e.jsxs("div",{className:"homepage-description",children:[e.jsx(n,{weight:"Inter",className:"description-title",children:s.title}),e.jsx(n,{weight:"Inter",className:"description-text",children:s.subtitle})]}),s?.sponsorLogo&&e.jsx("div",{className:"homepage-sponsor",children:e.jsxs("div",{className:"sponsor-content",children:[e.jsx("img",{src:m(s.sponsorLogo),alt:"Sponsor",className:"sponsor-logo"}),s.sponsorText&&e.jsxs(n,{weight:"Inter",className:"sponsor-text",children:["SPONSORED BY ",s.sponsorText.toUpperCase()]})]})}),e.jsx("div",{className:"homepage-video-container",children:!l&&s.videoUrl?e.jsx(E,{ref:c,url:m(s.videoUrl),controls:!0,playing:!1,width:"100%",height:"100%",onError:()=>d(!0)}):e.jsx("div",{className:"video-fallback",children:e.jsx("p",{children:"Video unavailable"})})}),s?.keyMoments&&s?.keyMoments?.length>0&&e.jsxs("div",{className:"homepage-carousel",children:[e.jsx(n,{weight:"Inter",className:"carousel-title",children:"KEY VIDEO MOMENTS"}),e.jsx("div",{className:"carousel-list",children:s.keyMoments.map(a=>e.jsx("div",{className:`carousel-item ${i===a.timestamp?"active":""}`,onClick:()=>t(a.timestamp),children:e.jsxs("div",{className:"carousel-content",children:[e.jsx("img",{src:m(a.thumbnail),alt:a.title,className:"carousel-thumbnail"}),e.jsxs("div",{className:"carousel-text-container",children:[e.jsx(n,{weight:"Inter",className:"carousel-text",children:a.title}),e.jsx(n,{weight:"Inter",className:"carousel-timestamp",children:N(a.timestamp)})]}),e.jsx("div",{className:"carousel-play-icon",children:e.jsx("span",{className:"play-icon",children:(i===a.timestamp,"â–¶")})})]})},a._id))})]}),e.jsx("div",{className:"homepage-buy-now",children:e.jsx("button",{className:"buy-now-button",onClick:()=>p("/buyer/buy-now"),children:e.jsx(n,{weight:"Inter",className:"buy-now-text",children:"BUY NOW"})})})]}):e.jsx("div",{className:"homepage-error",children:e.jsx("p",{children:"Failed to load data"})})},R=()=>{const{buyerToken:r,logout:b}=S(),s=v(),[u,i]=o.useState(null),[h,l]=o.useState(!1);o.useEffect(()=>{const t=localStorage.getItem("userLocation");t?i(t):r&&l(!0)},[r]);const d=["Delhi","Mumbai","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Bhopal","Patna","Vadodara","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Varanasi","Amritsar"],c=t=>{localStorage.setItem("userLocation",t),i(t),l(!1),alert(`${t} has been set as your location.`)},p=()=>{s("/buyer/notifications")},x=()=>r?e.jsxs("div",{className:"location-prompt-container",children:[e.jsx("h2",{className:"location-prompt-title",children:"Choose Your Location"}),e.jsx("div",{className:"location-cities-wrap",children:d.map((t,N)=>e.jsx("button",{className:"location-city-button",onClick:()=>c(t),children:t},N))}),e.jsx("button",{className:"location-search-button",onClick:()=>s("/buyer/location-selection"),children:"Search Location"})]}):null;return h&&!u?e.jsx(x,{}):e.jsxs("div",{className:"buyer-dashboard-container",children:[e.jsxs("div",{className:"buyer-dashboard-header",children:[e.jsx("div",{className:"header-spacer"}),e.jsx("img",{src:"/logo.png",alt:"Logo",className:"dashboard-logo"}),e.jsx("button",{className:"notification-button",onClick:p,"aria-label":"Notifications",children:e.jsx(w,{size:24,color:"#000"})})]}),e.jsx(L,{}),e.jsx("div",{className:"buyer-dashboard-content",children:e.jsx(M,{})}),e.jsx(k,{})]})};export{R as default};
