import{a as E,u as O,r as c,b as L,A as R,j as e,d as s}from"./index-BvbRJS_t.js";import{J as D,u as k,s as p,K as M,L as z}from"./index-DWuUjxJc.js";import{S as v}from"./SellerBottomNav-Pmzavrfs.js";const $=()=>{const{sellerToken:d,logout:m}=E(),o=O(),[l,h]=c.useState("details"),[u,N]=c.useState(!0),[r,f]=c.useState(!1),[t,b]=c.useState({company:"",address:"",city:"",pinCode:"",email:"",gst:"",contactPerson:"",contactNumber:"",brandProfile:"",yearsInBusiness:"",website:""}),[x,g]=c.useState([]);c.useEffect(()=>{j()},[]);const j=async()=>{try{if(N(!0),!d)return;const i=await L.get(`${R}/api/sellers`,{headers:{Authorization:`Bearer ${d}`}});if(i.data.success){const n=i.data.seller;if(b({company:n.companyName||"",address:n.address||"",city:n.city||"",pinCode:n.pinCode||"",email:n.email||"",gst:n.gstNumber||"",contactPerson:n.contactPerson||"",contactNumber:n.phoneNumber||"",brandProfile:n.brandOfProfileUsed||"",yearsInBusiness:n.yearsInBusiness?.toString()||"",website:n.website||""}),n.leads&&n.leads.length>0){const B=n.leads.sort((a,T)=>new Date(T.createdAt)-new Date(a.createdAt)).map(a=>({id:a._id,rawData:a,date:new Date(a.createdAt).toISOString().split("T")[0],customerName:a.contactInfo.name,amount:a.price,details:{personal:{fullName:a.contactInfo.name,contactNumber:a.contactInfo.contactNumber,whatsappNumber:a.contactInfo.whatsappNumber,email:a.contactInfo.email},project:{name:a.projectInfo.name,address:a.projectInfo.address,pinCode:a.projectInfo.pincode,stage:a.projectInfo.stage,timeline:a.projectInfo.timeline,totalSqFt:`${a.totalSqft} sq ft`,category:a.category?.name||"Not specified"}}}));g(B)}}}catch(i){console.error("Error fetching seller data:",i),alert("Failed to fetch seller data")}finally{N(!1),f(!1)}},S=()=>{f(!0),j()},I=()=>{alert(`To edit your profile information, please contact the admin.

You can reach out through:
• Phone: +1 (800) 123-4567
• Email: support@example.com

Admin will update your profile information after verification.`)},y=async()=>{try{await m(),o("/seller/login")}catch(i){console.error("Error during logout:",i),alert("Failed to logout")}},w=()=>{window.confirm("Are you sure you want to switch user type? You will be logged out.")&&(m(),o("/"))},A=Object.values(t).some(i=>i!==""),C=()=>A?e.jsxs("div",{className:"details-section",children:[e.jsx(s,{weight:"SemiBold",className:"section-title",children:"BUSINESS INFORMATION"}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Company*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.company||"Not set"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Address*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.address||"Not set"})})]}),e.jsxs("div",{className:"info-row",children:[e.jsxs("div",{className:"info-group flex-70",children:[e.jsx(s,{className:"info-label",children:"City*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.city||"Not set"})})]}),e.jsxs("div",{className:"info-group flex-30",children:[e.jsx(s,{className:"info-label",children:"PIN Code*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.pinCode||"Not set"})})]})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Years in Business"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.yearsInBusiness||"Not set"})})]}),e.jsx(s,{weight:"SemiBold",className:"section-title",children:"CONTACT INFORMATION"}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Email*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.email||"Not set"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Website"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.website||"Not specified"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"GST Number*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.gst||"Not set"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Contact Person*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.contactPerson||"Not set"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Contact Number*"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.contactNumber||"Not set"})})]}),e.jsxs("div",{className:"info-group",children:[e.jsx(s,{className:"info-label",children:"Brand of Profile Used"}),e.jsx("div",{className:"info-value-container",children:e.jsx(s,{className:"info-value",children:t.brandProfile||"Not specified"})})]}),e.jsxs("div",{className:"contact-admin-banner",children:[e.jsx(p,{size:20}),e.jsx(s,{className:"banner-text",children:"Profile editing is restricted. Please contact admin to update your information."})]}),e.jsxs("button",{className:"contact-admin-button",onClick:I,children:[e.jsx(s,{weight:"SemiBold",children:"CONTACT ADMIN TO EDIT PROFILE"}),e.jsx(p,{size:20})]})]}):e.jsx(s,{className:"no-info-text",children:"No business information available"}),P=()=>e.jsx("div",{className:"details-section",children:x.length>0?x.map(i=>e.jsxs("div",{className:"purchase-card",children:[e.jsx("div",{className:"purchase-header",children:e.jsx(s,{className:"purchase-date",children:i.date})}),e.jsx(s,{weight:"SemiBold",className:"purchase-customer",children:i.customerName}),e.jsxs("div",{className:"purchase-details",children:[e.jsxs(s,{className:"purchase-detail",children:["Project: ",i.details.project.name]}),e.jsxs(s,{className:"purchase-detail",children:["Location: ",i.details.project.address]}),e.jsxs(s,{className:"purchase-detail",children:["Area: ",i.details.project.totalSqFt]})]}),e.jsxs("button",{className:"invoice-button",onClick:()=>alert("Invoice feature coming soon"),children:[e.jsx(s,{weight:"SemiBold",children:"VIEW INVOICE"}),e.jsx(M,{size:20})]}),e.jsxs("button",{className:"details-button",onClick:()=>o("/seller/contact-buyer",{state:{lead:i}}),children:[e.jsx(s,{weight:"SemiBold",children:"VIEW DETAILS"}),e.jsx(z,{size:20})]})]},i.id)):e.jsx(s,{className:"no-info-text",children:"No purchase history available"})});return u?e.jsxs("div",{className:"seller-account-container",children:[e.jsxs("div",{className:"account-loading",children:[e.jsx("div",{className:"spinner"}),e.jsx(s,{children:"Loading..."})]}),e.jsx(v,{})]}):e.jsxs("div",{className:"seller-account-container",children:[e.jsxs("div",{className:"account-header",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",className:"account-logo"}),e.jsx(s,{weight:"SemiBold",className:"account-title",children:"My Account"})]}),e.jsxs("div",{className:"account-tabs",children:[e.jsx("button",{className:`account-tab ${l==="details"?"active":""}`,onClick:()=>h("details"),children:e.jsx(s,{weight:"SemiBold",className:`tab-text ${l==="details"?"active":""}`,children:"PERSONAL DETAILS"})}),e.jsx("button",{className:`account-tab ${l==="purchase"?"active":""}`,onClick:()=>h("purchase"),children:e.jsx(s,{weight:"SemiBold",className:`tab-text ${l==="purchase"?"active":""}`,children:"PURCHASE HISTORY"})})]}),e.jsxs("div",{className:"account-content",children:[r&&e.jsx("div",{className:"refresh-indicator",children:e.jsx("div",{className:"spinner small"})}),l==="details"?C():P()]}),e.jsxs("div",{className:"account-actions",children:[e.jsxs("button",{className:"action-button logout-button",onClick:y,children:[e.jsx(D,{size:20}),e.jsx(s,{weight:"SemiBold",children:"LOGOUT"})]}),e.jsxs("button",{className:"action-button switch-button",onClick:w,children:[e.jsx(k,{size:20}),e.jsx(s,{weight:"SemiBold",children:"SWITCH USER TYPE"})]})]}),!u&&e.jsx("button",{className:"refresh-fab",onClick:S,disabled:r,children:e.jsx(s,{weight:"SemiBold",children:r?"Refreshing...":"Refresh"})}),e.jsx(v,{})]})};export{$ as default};
