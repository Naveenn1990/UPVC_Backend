import{u as v,a as f,r as n,j as e,b as h,A as y}from"./index-BvbRJS_t.js";const C=()=>{const c=v(),{loginBuyer:g}=f(),[s,m]=n.useState(!1),[o,d]=n.useState(""),[l,x]=n.useState(""),[t,N]=n.useState(""),[r,u]=n.useState(""),[b,p]=n.useState(!1),j=async()=>{if(s){if(!o.trim()){alert("Please enter your name");return}if(!l.trim()){alert("Please enter your email");return}if(!l.includes("@")){alert("Please enter a valid email address");return}if(!t||t.length<6){alert("Password must be at least 6 characters");return}}if(!s){if(!l.trim()&&!r){alert("Please enter email or mobile number");return}if(!t){alert("Please enter your password");return}}if(r&&r.length!==10){alert("Please enter a valid 10-digit mobile number");return}if(s&&!r){alert("Please enter your mobile number");return}p(!0);try{if(s){const a=await h.post(`${y}/api/auth/register`,{name:o.trim(),email:l.trim(),password:t,mobileNumber:r},{headers:{"Content-Type":"application/json"}});a.status===201&&a.data.token&&(g(a.data.token),c("/buyer/dashboard"))}else{const a=await h.post(`${y}/api/auth/login`,{...l.trim()&&{email:l.trim()},...r&&{mobileNumber:r},password:t},{headers:{"Content-Type":"application/json"}});a.status===200&&a.data.token&&(g(a.data.token),c("/buyer/dashboard"))}}catch(a){const i=a.response?.data?.message||a.message;alert(`Error: ${i}`)}finally{p(!1)}};return e.jsx("div",{className:"buyer-login-container",children:e.jsxs("div",{className:"buyer-login-content",children:[e.jsx("div",{className:"buyer-login-title-container",children:e.jsx("img",{src:"/logo.png",alt:"UPVC Logo",className:"buyer-login-logo"})}),e.jsxs("div",{className:"buyer-login-toggle",children:[e.jsx("button",{className:`buyer-login-toggle-btn ${s?"":"active"}`,onClick:()=>{m(!1),d(""),u("")},children:"Login"}),e.jsx("button",{className:`buyer-login-toggle-btn ${s?"active":""}`,onClick:()=>{m(!0),u("")},children:"Register"})]}),e.jsxs("div",{className:"buyer-login-form",children:[s&&e.jsxs("div",{className:"buyer-login-input-group",children:[e.jsx("label",{className:"buyer-login-label",children:"Name"}),e.jsx("input",{type:"text",className:"buyer-login-input",placeholder:"Enter your name",value:o,onChange:a=>d(a.target.value)})]}),e.jsxs("div",{className:"buyer-login-input-group",children:[e.jsx("label",{className:"buyer-login-label",children:"Email"}),e.jsx("input",{type:"email",className:"buyer-login-input",placeholder:"Enter your email",value:l,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"buyer-login-input-group",children:[e.jsx("label",{className:"buyer-login-label",children:"Password"}),e.jsx("input",{type:"password",className:"buyer-login-input",placeholder:s?"Enter password (min 6 characters)":"Enter your password",value:t,onChange:a=>N(a.target.value)})]}),s&&e.jsxs("div",{className:"buyer-login-input-group",children:[e.jsx("label",{className:"buyer-login-label",children:"Mobile Number"}),e.jsxs("div",{className:"buyer-login-phone-input",children:[e.jsx("span",{className:"buyer-login-country-code",children:"+91"}),e.jsx("input",{type:"tel",className:"buyer-login-input buyer-login-phone-number",placeholder:"Enter 10-digit mobile number",value:r,onChange:a=>{const i=a.target.value.replace(/\D/g,"").slice(0,10);u(i)},maxLength:10})]})]}),!s&&e.jsxs("div",{className:"buyer-login-input-group",children:[e.jsx("label",{className:"buyer-login-label",children:"Mobile Number (Optional)"}),e.jsxs("div",{className:"buyer-login-phone-input",children:[e.jsx("span",{className:"buyer-login-country-code",children:"+91"}),e.jsx("input",{type:"tel",className:"buyer-login-input buyer-login-phone-number",placeholder:"Or enter mobile number",value:r,onChange:a=>{const i=a.target.value.replace(/\D/g,"").slice(0,10);u(i)},maxLength:10})]})]}),e.jsx("button",{className:"buyer-login-button",onClick:j,disabled:b||s&&(!o.trim()||!l.trim()||!t||t.length<6||!r||r.length!==10)||!s&&(!l.trim()&&!r||!t),children:b?s?"Registering...":"Logging in...":s?"Register":"Login"})]})]})})};export{C as default};
