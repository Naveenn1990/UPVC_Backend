import{a as q,u as H,r,b as h,c as m,j as e,d as s}from"./index-BvbRJS_t.js";import{o as G,p as W,q as Y,r as $,i as K,s as _,k as V,t as T,u as J,v as Q}from"./index-DWuUjxJc.js";import{B as x}from"./BuyerBottomNav-Bxt6vIKH.js";const te=()=>{const{buyerToken:a,logout:N}=q(),i=H(),[o,j]=r.useState(""),[l,b]=r.useState(""),[c,p]=r.useState(!1),[d,g]=r.useState(0),[C,f]=r.useState(0),[u,y]=r.useState(""),[F,n]=r.useState(!1),[v,w]=r.useState(null),[E,M]=r.useState(!1),[O,P]=r.useState(!1);r.useEffect(()=>{a&&A()},[a]);const A=async()=>{if(a)try{n(!0);const t=await h.get(m("api/buyer"),{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});t.data&&(w(t.data?.user),j(t.data?.user?.name||""),b(t.data?.user?.mobileNumber||""))}catch(t){M(t.message),console.error("Error fetching User data:",t)}finally{n(!1),P(!1)}},R=async()=>{try{if(!a)return;n(!0);const t=await h.patch(m("api/buyer/update"),{name:o,mobileNumber:l},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});w(t?.data),p(!1),alert("Profile updated successfully")}catch(t){console.error("Update error:",t),alert(t.response?.data?.error||"Failed to update profile")}finally{n(!1)}},L=async()=>{try{if(!a){alert("Please login to submit feedback");return}const t=(o||v?.name||"").trim(),I=(l||v?.mobileNumber||"").trim(),S=(u||"").trim(),k=d;if(!t){alert("Name required. Please enter your name.");return}if(!/^\d{10}$/.test(I)){alert("Invalid phone. Enter a valid 10-digit phone number.");return}if(!S){alert("Feedback required. Please write your feedback.");return}if(k<=0){alert("Rating required. Please select a rating.");return}n(!0),await h.post(m("api/feedback"),{name:t,phone:I,text:S,stars:k},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}}),alert("Thank you! Your feedback has been submitted"),g(0),y("")}catch(t){console.error("Feedback error:",t),alert("Failed to submit feedback")}finally{n(!1)}},z=()=>{window.open("tel:+18001234567","_self")},B=()=>{window.open("mailto:support@example.com","_blank")},U=async()=>{if(!a){i("/buyer/login");return}try{N(),i("/user-type-selection"),alert("Logged out successfully")}catch(t){console.error("Logout error:",t),alert("Failed to logout")}},D=async()=>{try{N(),i("/user-type-selection"),alert("Switched Mode. Please select your user type.")}catch(t){console.error("Switch user type error:",t),alert("Failed to switch user type")}};return F&&!O?e.jsxs("div",{className:"buyer-account-container",children:[e.jsx("div",{className:"loading-container",children:e.jsx("div",{className:"spinner"})}),e.jsx(x,{})]}):E?e.jsxs("div",{className:"buyer-account-container",children:[e.jsx("div",{className:"error-container",children:e.jsxs(s,{className:"error-text",children:["Error loading account: ",E]})}),e.jsx(x,{})]}):e.jsxs("div",{className:"buyer-account-container",children:[e.jsxs("div",{className:"buyer-account-content",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",className:"account-logo"}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"profile-card",children:[e.jsxs("div",{className:"profile-header",children:[e.jsx(s,{weight:"Inter",className:"section-title",children:"PROFILE INFORMATION"}),e.jsx("button",{className:"edit-button",onClick:c?R:()=>p(!c),children:c?e.jsx(G,{size:24,color:"#000"}):e.jsx(W,{size:24,color:"#000"})})]}),e.jsxs("div",{className:"input-container",children:[e.jsx(s,{weight:"Inter",className:"input-label",children:"Full Name"}),e.jsx("input",{type:"text",className:"input-field",value:o,onChange:t=>j(t.target.value),disabled:!c,placeholder:"Enter your name"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx(s,{weight:"Inter",className:"input-label",children:"Phone Number"}),e.jsx("input",{type:"tel",className:"input-field",value:l,onChange:t=>b(t.target.value),disabled:!c,placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"section-card",children:[e.jsx(s,{weight:"Inter",className:"section-title",children:"FEEDBACK"}),e.jsx(s,{weight:"Inter",className:"feedback-question",children:"On a scale of 1 - 5 how would you rate us?"}),e.jsx("div",{className:"rating-container",children:[1,2,3,4,5].map(t=>e.jsx("button",{className:"star-button",onClick:()=>g(t),onMouseEnter:()=>f(t),onMouseLeave:()=>f(0),children:t<=(C||d)?e.jsx(Y,{size:36,color:"#FFD700"}):e.jsx($,{size:36,color:"#FFD700"})},t))}),e.jsx(s,{weight:"Inter",className:"feedback-prompt",children:"PLEASE SHARE YOUR INPUTS IF YOU THINK WE NEED TO DO SOMETHING BETTER"}),e.jsx("textarea",{className:"feedback-input",rows:"5",maxLength:500,placeholder:"Your valuable feedback here...",value:u,onChange:t=>y(t.target.value)}),e.jsxs(s,{weight:"Inter",className:"char-count",children:[u.length,"/500 characters"]}),e.jsx("button",{className:"submit-button",onClick:L,disabled:d===0,children:e.jsx(s,{weight:"Inter",className:"submit-button-text",children:"SUBMIT FEEDBACK"})})]})]}):null,e.jsxs("div",{className:"section-card",children:[e.jsx(s,{weight:"Inter",className:"card-title",children:"CONTACT US"}),e.jsxs("div",{className:"contact-info-container",children:[e.jsxs("button",{className:"contact-item",onClick:z,children:[e.jsx(K,{size:16,color:"#666"}),e.jsxs("div",{className:"contact-text-container",children:[e.jsx(s,{weight:"Inter",className:"contact-label",children:"Phone"}),e.jsx(s,{weight:"Inter",className:"contact-value",children:"+1 (800) 123-4567"})]})]}),e.jsxs("button",{className:"contact-item",onClick:B,children:[e.jsx(_,{size:16,color:"#666"}),e.jsxs("div",{className:"contact-text-container",children:[e.jsx(s,{weight:"Inter",className:"contact-label",children:"Email"}),e.jsx(s,{weight:"Inter",className:"contact-value",children:"support@example.com"})]})]}),e.jsxs("div",{className:"contact-item",children:[e.jsx(V,{size:16,color:"#666"}),e.jsxs("div",{className:"contact-text-container",children:[e.jsx(s,{weight:"Inter",className:"contact-label",children:"Address"}),e.jsx(s,{weight:"Inter",className:"contact-value",children:"123 Business St, Suite 100, San Francisco, CA 94107"})]})]})]}),e.jsx("button",{className:"message-button",onClick:()=>alert("Send message functionality"),children:e.jsx(s,{weight:"Inter",className:"message-button-text",children:"SEND MESSAGE"})})]}),e.jsxs("div",{className:"section-card",children:[e.jsx(s,{weight:"Inter",className:"section-title",children:"TERMS & CONDITIONS"}),e.jsx(s,{weight:"Inter",className:"section-text",children:"By using our services, you agree to our terms and conditions. Please read them carefully to understand your rights and responsibilities."}),e.jsxs("button",{className:"link-button",children:[e.jsx(s,{weight:"Inter",className:"link-button-text",children:"VIEW FULL TERMS"}),e.jsx(T,{size:20,color:"#000"})]})]}),e.jsxs("div",{className:"section-card",children:[e.jsx(s,{weight:"Inter",className:"section-title",children:"ABOUT US"}),e.jsx(s,{weight:"Inter",className:"section-text",children:"We are committed to providing premium services with unmatched quality. Our team works tirelessly to ensure your complete satisfaction."}),e.jsxs("button",{className:"link-button",children:[e.jsx(s,{weight:"Inter",className:"link-button-text",children:"LEARN MORE"}),e.jsx(T,{size:20,color:"#000"})]})]}),e.jsxs("button",{className:"switch-button",onClick:D,children:[e.jsx(s,{weight:"Inter",className:"switch-button-text",children:"SWITCH TO SELLER MODE"}),e.jsx(J,{size:24,color:"#000"})]}),e.jsxs("button",{className:"logout-button",onClick:U,children:[e.jsx(s,{weight:"Inter",className:"logout-button-text",children:a?"LOGOUT":"LOGIN"}),e.jsx(Q,{size:24,color:"#000"})]})]}),e.jsx(x,{})]})};export{te as default};
